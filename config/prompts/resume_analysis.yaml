# Resume Analysis Prompts
# Recruiter-focused: Extract valuable candidate information with weighted scoring

# =============================================================================
# SCORING WEIGHTS (Total = 100%)
# =============================================================================
# - Skills Match: 40% (Technical skills alignment with role/JD)
# - Experience: 30% (Years, relevance, progression, achievements)
# - Education: 20% (Degrees, certifications, continuous learning)
# - Quality: 10% (Resume clarity, communication, professionalism)
# =============================================================================

# Prompt for Career Gap & Red Flag Analysis
gap_analysis_prompt: |
  Analyze the following resume for RED FLAGS, CAREER GAPS, and AUTHENTICITY CONCERNS.

  ## RESUME:
  {resume_text}

  ## RED FLAG DETECTION - Analyze for:

  ### 1. TIMELINE ISSUES
  - Career gaps longer than 3 months (unexplained)
  - Overlapping dates (working two full-time jobs simultaneously)
  - Vague date ranges (only years, no months)
  - Experience math doesn't add up (claimed years vs actual timeline)

  ### 2. SKILL INFLATION INDICATORS
  - Buzzword stuffing (too many technologies for the experience level)
  - Claims of expertise without supporting evidence
  - Senior titles with junior-level experience
  - Mismatch between skills listed and work descriptions

  ### 3. AUTHENTICITY CONCERNS
  - Generic/templated descriptions (no specific details)
  - No quantified achievements (no metrics, no numbers)
  - Unrealistic claims (e.g., "increased revenue by 500%")
  - Copy-paste job descriptions across roles

  ### 4. JOB HOPPING PATTERN
  - Multiple roles under 1 year
  - Pattern of short tenures
  - Lateral moves without growth

  ## OUTPUT FORMAT (JSON):
  {{
    "career_gaps": [
      {{"start": "YYYY-MM", "end": "YYYY-MM", "duration_months": 0, "severity": "medium", "explanation_provided": false}}
    ],
    "timeline_overlaps": [
      {{"company1": "<company>", "company2": "<company>", "overlap_period": "<dates>", "suspicious": true}}
    ],
    "skill_inflation_flags": [
      {{"issue": "<description>", "severity": "high"}}
    ],
    "authenticity_concerns": [
      {{"issue": "<description>", "severity": "high"}}
    ],
    "job_hopping_analysis": {{
      "average_tenure_months": 0,
      "roles_under_1_year": 0,
      "pattern_detected": false,
      "severity": "low"
    }},
    "calculated_total_experience_years": 0.0,
    "claimed_total_experience_years": 0.0,
    "experience_discrepancy": false,
    "overall_red_flag_score": 0,
    "red_flag_summary": "<summary>",
    "verification_priority": ["<item_1>", "<item_2>"]
  }}

system_prompt: |
  You are an expert technical recruiter with 15+ years of experience screening candidates.
  Your job is to extract and present the most valuable information from resumes so hiring managers can quickly assess candidates.

  Focus on FACTS from the resume. Extract every skill, technology, and achievement mentioned.
  Be thorough - don't miss any technical skills or tools mentioned anywhere in the resume.

  IMPORTANT RULES:
  1. Be honest about gaps - if the resume lacks something, say so.
  2. Identify potential red flags (job hopping, unexplained gaps, vague descriptions).
  3. Look for authenticity indicators - specific metrics, named technologies, concrete outcomes.
  4. Assess communication quality based on how well the resume is written.
  5. ALWAYS extract technical skills - scan the ENTIRE resume including job descriptions, projects, and skills sections.
  6. Return valid JSON only - no markdown, no code blocks, just raw JSON.
  7. **DO NOT HALLUCINATE OR INVENT INFORMATION.** If a skill, metric, or detail is not explicitly in the text, do NOT infer it. Return empty lists or null values if data is missing.
  8. **DO NOT USE EXAMPLE DATA.** The JSON schema examples below are for FORMAT ONLY. Do not copy "Python", "AWS", or "Senior Software Engineer" unless they are actually in the resume.
  9. **NO INTERVIEW PERFORMANCE DATA.** You are analyzing a RESUME. Do not invent interview feedback.

# Prompt for analysis WITHOUT a job description
analysis_without_jd_prompt: |
  Analyze this resume and extract all valuable information for a recruiter.
  NOTE: No specific job description provided - give a general assessment.

  ## RESUME TEXT TO ANALYZE:
  {resume_text}

  ## CRITICAL EXTRACTION REQUIREMENTS:

  ### 1. CANDIDATE SNAPSHOT
  Quick overview for the recruiter:
  - Professional title/role (what they do)
  - Career level: Entry (0-2 yrs) / Mid (3-5 yrs) / Senior (6-10 yrs) / Staff/Principal (10+ yrs) / Executive
  - Primary industry/domain
  - Total years of experience (calculate from work history)
  - Current/most recent company and role
  - **Tenure Metrics:**
    - Current Tenure (e.g., "1 yr 4 mos")
    - Average Tenure across all roles (e.g., "2 yrs 6 mos")

  ### 2. KEY SKILLS (TOP 5-8 CORE COMPETENCIES)
  Identify the candidate's PRIMARY skills - the ones they use most and are strongest in.
  These should be the skills that define their professional identity.

  ### 3. TECHNICAL SKILLS (EXTRACT ALL - THIS IS CRITICAL!)
  SCAN THE ENTIRE RESUME CAREFULLY. Look in:
  - Skills section
  - Job descriptions and bullet points
  - Project descriptions
  - Education/courses
  - Certifications

  Extract into these categories (include ALL you find, even if only mentioned once):
  - languages: Programming languages
  - frameworks: Frameworks and libraries
  - databases: Databases
  - cloud_devops: Cloud and DevOps tools
  - tools: Other tools and platforms

  IMPORTANT: If a skill is mentioned ANYWHERE in the resume, extract it. Don't miss any!

  ### 3. SOFT SKILLS & COMPETENCIES
  Evidence-based soft skills (only include if there's proof in the resume):
  - Leadership indicators (team size managed, mentoring, driving decisions)
  - Communication (presentations, documentation, stakeholder management)
  - Collaboration (cross-functional work, team projects)
  - Problem-solving evidence (specific challenges overcome)

  ### 4. DOMAIN EXPERTISE
  Industries and specialized knowledge areas:
  - Industries worked in
  - Certifications
  - Specialized domains

  ### 5. CAREER HIGHLIGHTS
  Top 4-5 achievements that demonstrate impact. Include:
  - Quantified results (%, $, users, time saved)
  - Scale of work (team size, user base, data volume)
  - Technical complexity
  - Business impact

  ### 6. EXPERIENCE SUMMARY
  Brief summary of each role (most recent first):
  - Company name and duration
  - Role/title
  - Key responsibility or achievement

  ### 7. EDUCATION & CERTIFICATIONS
  - Degrees (institution, field, year if available)
  - Professional certifications
  - Relevant courses or training

  ### 8. STRENGTHS & POTENTIAL CONCERNS
  Balanced assessment:
  - Key strengths (what makes this candidate stand out)
  - Potential concerns (gaps, inconsistencies, areas needing clarification)
  - Areas that need interview verification

  ### 9. WEIGHTED SCORING (CRITICAL - Must provide actual scores!)
  You MUST calculate and provide ALL these scores as integer values 0-100:

  **Score each dimension:**
  - **skills_score** (0-100): Technical skills breadth, depth, and relevance
  - **experience_score** (0-100): Years of experience, career progression, achievements
  - **education_score** (0-100): Degrees, certifications, continuous learning
  - **quality_score** (0-100): Resume clarity, professionalism, communication
  - **technical_score**: Set equal to skills_score
  - **overall_score**: Calculate as: round((skills_score × 0.4) + (experience_score × 0.3) + (education_score × 0.2) + (quality_score × 0.1))

  ### 10. RED FLAG ASSESSMENT
  Analyze for concerns and assign:
  - **red_flag_count** (0-10): Number of concerns identified
  - **red_flag_severity**: "none" | "low" | "medium" | "high"
  - **red_flags**: Array of specific issues found
  - **authenticity_score** (0-100): How genuine/authentic the resume appears

  Red flags to look for:
  - Career gaps > 6 months unexplained
  - Overlapping dates (two jobs simultaneously)
  - Skill inflation (claiming expertise without evidence)
  - Generic descriptions with no specifics
  - Missing metrics/quantification
  - Job hopping (multiple roles < 1 year)

  ### 11. SUGGESTED INTERVIEW QUESTIONS
  Top 4-5 topics an interviewer should explore. These are SUGGESTIONS for a future interview:
  - Questions to verify claimed experience
  - Areas where more depth is needed
  - Potential concerns to probe
  - Interesting projects worth discussing

  ### 12. BEST FIT ROLES
  Based on the resume, suggest 3-4 role types this candidate would be best suited for.

  ### 13. JD RECOMMENDATION
  IMPORTANT: Identify specific insights that would be MORE valuable if a job description was provided:
  - "skills_match_available": false - Cannot assess if skills match requirements without JD
  - "gap_analysis_available": false - Cannot identify missing skills without JD
  - "role_fit_available": false - Cannot assess specific role fit without JD
  - "jd_would_help_with": List specific things a JD would help assess

  ### 14. SCREENING VERDICT
  2-3 sentences: Who is this candidate? What roles are they best suited for? Key decision points.

  ## OUTPUT FORMAT - Return ONLY valid JSON (no markdown, no code blocks):
  {{
    "candidate_profile": {{
      "title": "<extract_title>",
      "career_stage": "<extract_level>",
      "domain": "<extract_domain>",
      "years_experience": "<extract_years>",
      "current_company": "<extract_company>",
      "current_role": "<extract_role>",
      "current_tenure": "<extract_tenure>",
      "average_tenure": "<calculate_avg_tenure>"
    }},
    "key_skills": ["<skill_1>", "<skill_2>", "<skill_3>"],
    "technical_skills": {{
      "languages": ["<lang_1>", "<lang_2>"],
      "frameworks": ["<framework_1>", "<framework_2>"],
      "databases": ["<db_1>", "<db_2>"],
      "cloud_devops": ["<tool_1>", "<tool_2>"],
      "tools": ["<tool_1>", "<tool_2>"]
    }},
    "soft_skills": ["<skill_1>", "<skill_2>"],
    "domain_expertise": {{
      "industries": ["<industry_1>", "<industry_2>"],
      "certifications": ["<cert_1>", "<cert_2>"],
      "specializations": ["<spec_1>", "<spec_2>"]
    }},
    "career_highlights": [
      "<highlight_1>",
      "<highlight_2>",
      "<highlight_3>"
    ],
    "experience_summary": [
      {{"company": "<company_name>", "duration": "<dates>", "role": "<title>", "highlight": "<key_achievement>"}}
    ],
    "education": [
      {{"degree": "<degree>", "institution": "<school>", "year": "<year>"}}
    ],
    "certifications": ["<cert_1>", "<cert_2>"],
    "strengths": ["<strength_1>", "<strength_2>"],
    "concerns": ["<concern_1>", "<concern_2>"],
    "verification_needed": ["<item_1>", "<item_2>"],
    "skills_score": 0,
    "experience_score": 0,
    "education_score": 0,
    "quality_score": 0,
    "overall_score": 0,
    "technical_score": 0,
    "jd_match_score": null,
    "red_flag_count": 0,
    "red_flag_severity": "none",
    "red_flags": [
      {{"type": "<type>", "description": "<description>", "severity": "low"}}
    ],
    "authenticity_score": 0,
    "interview_topics": [
      {{"topic": "<topic>", "why": "<reasoning>"}}
    ],
    "best_fit_roles": ["<role_1>", "<role_2>"],
    "jd_recommendation": {{
      "has_jd": false,
      "recommendation_message": "Add a job description to unlock skills gap analysis, match percentage, and role-specific interview questions.",
      "benefits_of_jd": ["Identify skill gaps for target role", "Calculate match percentage", "Get tailored interview questions"]
    }},
    "verdict": "<recruiter_verdict>"
  }}


# Prompt for analysis WITH a job description
analysis_with_jd_prompt: |
  Analyze this resume AGAINST the provided job description.
  Perform a detailed match analysis to help the recruiter assess fit.

  ## RESUME:
  {resume_text}

  ## JOB DESCRIPTION:
  {job_description}

  ## EXTRACTION REQUIREMENTS:

  ### 1. CANDIDATE SNAPSHOT
  Quick overview for the recruiter:
  - Professional title/role (what they do)
  - Career level: Entry (0-2 yrs) / Mid (3-5 yrs) / Senior (6-10 yrs) / Staff/Principal (10+ yrs) / Executive
  - Primary industry/domain
  - Total years of experience (calculate from work history)
  - Current/most recent company and role

  ### 2. JOB REQUIREMENTS ANALYSIS
  Extract key requirements from the JD:
  - Required skills (must-have)
  - Preferred skills (nice-to-have)
  - Experience level required
  - Domain/industry requirements
  - Soft skills/culture requirements

  ### 3. SKILLS MATCH ANALYSIS
  For EACH required skill in the JD, assess:
  - Present/Absent in resume
  - Evidence strength (strong/weak/none)
  - Specific examples from resume

  ### 4. TECHNICAL SKILLS (EXTRACT ALL)
  Go through the ENTIRE resume and extract EVERY technology:
  - Programming Languages
  - Frameworks & Libraries
  - Databases
  - Cloud & DevOps
  - Tools & Platforms

  Mark which skills match JD requirements vs. additional skills.

  ### 5. GAP ANALYSIS
  Identify missing or weak areas:
  - Required skills not found in resume
  - Experience gaps (years, level, type)
  - Domain experience gaps
  - Transferable skills that could bridge gaps

  ### 6. SOFT SKILLS & COMPETENCIES
  Evidence-based soft skills with JD alignment:
  - Leadership (if required by JD)
  - Communication
  - Collaboration
  - Other JD-specific requirements

  ### 7. CAREER HIGHLIGHTS (JD-RELEVANT)
  Top 4-5 achievements most relevant to the target role:
  - Focus on experiences matching JD requirements
  - Quantified results that demonstrate fit
  - Transferable wins from different contexts

  ### 8. EXPERIENCE SUMMARY
  Brief summary of each role with JD relevance noted.

  ### 9. EDUCATION & CERTIFICATIONS
  Highlight any that match JD requirements.

  ### 10. WEIGHTED SCORING (CRITICAL - Must provide actual scores!)
  You MUST calculate and provide ALL these scores as integer values 0-100:

  **Score each dimension:**
  - **skills_score** (0-100): Technical skills breadth, depth, and relevance to JD requirements
  - **experience_score** (0-100): Years of experience, career progression, achievements
  - **education_score** (0-100): Degrees, certifications, continuous learning
  - **quality_score** (0-100): Resume clarity, professionalism, communication
  - **technical_score**: Set equal to skills_score
  - **jd_match_score** (0-100): Overall job description match percentage
  - **overall_score**: Calculate as: round((skills_score × 0.4) + (experience_score × 0.3) + (education_score × 0.2) + (quality_score × 0.1))

  ### 11. SUGGESTED INTERVIEW QUESTIONS
  Based on the JD and resume, suggest 5-6 interview questions. These are SUGGESTIONS for a future interview:
  - Questions to verify JD-critical skills
  - Questions to probe gap areas
  - Questions about relevant experience claims
  - Questions to assess cultural fit

  ### 12. SCREENING RECOMMENDATION
  Clear recommendation with rationale:
  - "strong_yes" / "yes" / "maybe" / "no" / "strong_no"
  - Key reasons for recommendation
  - Concerns that need interview validation
  - Suggested interview focus areas

  ### 13. SCREENING VERDICT
  3-4 sentences: How well does this candidate match the role? Key strengths and gaps. What to validate in interview.

  ## OUTPUT FORMAT (JSON only, no markdown):
  {{
    "candidate_profile": {{
      "title": "<extract_title>",
      "career_stage": "<extract_level>",
      "domain": "<extract_domain>",
      "years_experience": "<extract_years>",
      "current_company": "<extract_company>",
      "current_role": "<extract_role>"
    }},
    "jd_requirements": {{
      "required_skills": ["<skill_1>", "<skill_2>"],
      "preferred_skills": ["<skill_1>", "<skill_2>"],
      "experience_level": "<level>",
      "domain_requirements": ["<req_1>"],
      "soft_skills_required": ["<skill_1>"]
    }},
    "skills_match": [
      {{"skill": "<required_skill>", "status": "<strong_match/match/weak_match/missing>", "evidence": "<evidence_from_resume>"}}
    ],
    "technical_skills": {{
      "languages": ["<lang_1>"],
      "frameworks": ["<fw_1>"],
      "databases": ["<db_1>"],
      "cloud_devops": ["<tool_1>"],
      "tools": ["<tool_1>"],
      "jd_matching": ["<skill_1>", "<skill_2>"],
      "additional": ["<skill_3>"]
    }},
    "gap_analysis": {{
      "missing_required": ["<skill_1>"],
      "missing_preferred": ["<skill_2>"],
      "experience_gaps": ["<gap_1>"],
      "transferable_skills": ["<skill_1>"]
    }},
    "soft_skills": ["<skill_1>", "<skill_2>"],
    "career_highlights": ["<highlight_1>", "<highlight_2>"],
    "experience_summary": [
      {{"company": "<name>", "duration": "<dates>", "role": "<title>", "highlight": "<relevance_note>"}}
    ],
    "education": [
      {{"degree": "<degree>", "institution": "<school>", "year": "<year>"}}
    ],
    "certifications": ["<cert_1>"],
    "skills_score": 0,
    "experience_score": 0,
    "education_score": 0,
    "quality_score": 0,
    "technical_score": 0,
    "jd_match_score": 0,
    "overall_score": 0,
    "red_flag_count": 0,
    "red_flag_severity": "none",
    "red_flags": [
      {{"type": "<type>", "description": "<description>", "severity": "<severity>"}}
    ],
    "authenticity_score": 0,
    "interview_topics": [
      {{"topic": "<topic>", "why": "<reasoning>", "suggested_question": "<question>"}}
    ],
    "hiring_recommendation": {{
      "decision": "<yes/no/maybe>",
      "confidence": "<high/medium/low>",
      "key_reasons": ["<reason_1>"],
      "concerns": ["<concern_1>"],
      "interview_focus": ["<focus_1>"]
    }},
    "verdict": "<recruiter_verdict>"
  }}


# Default prompt (used when JD status unclear)
analysis_prompt: |
  Analyze this resume and extract all valuable information for a recruiter.

  ## RESUME:
  {resume_text}

  ## JOB DESCRIPTION (if provided):
  {job_description}

  Determine if a job description was provided. If yes, perform a detailed JD match analysis.
  If no JD provided, give a general assessment and recommend adding a JD for better insights.

  ## EXTRACTION REQUIREMENTS:

  ### 1. CANDIDATE SNAPSHOT
  Quick overview for the recruiter:
  - Professional title/role (what they do)
  - Career level: Entry (0-2 yrs) / Mid (3-5 yrs) / Senior (6-10 yrs) / Staff/Principal (10+ yrs) / Executive
  - Primary industry/domain
  - Total years of experience
  - Current/most recent company and role

  ### 2. TECHNICAL SKILLS (EXTRACT ALL - be thorough!)
  Go through the ENTIRE resume and extract EVERY technology, tool, language, framework mentioned:
  - Programming Languages
  - Frameworks & Libraries
  - Databases
  - Cloud & DevOps
  - Tools & Platforms

  IMPORTANT: Read every bullet point, project description, and section. Don't miss any skills!

  ### 3. SOFT SKILLS & COMPETENCIES
  Evidence-based soft skills (only include if there's proof in the resume):
  - Leadership indicators (team size managed, mentoring)
  - Communication (presentations, documentation, stakeholder management)
  - Collaboration (cross-functional work, team projects)

  ### 4. DOMAIN EXPERTISE
  Industries and specialized knowledge areas:
  - Industries worked in
  - Certifications
  - Specialized domains

  ### 5. CAREER HIGHLIGHTS
  Top 4-5 achievements that demonstrate impact. Include:
  - Quantified results (%, $, users, time saved)
  - Scale of work (team size, user base, data volume)
  - Technical complexity
  - Business impact

  ### 6. EXPERIENCE SUMMARY
  Brief summary of each role (most recent first):
  - Company name and duration
  - Role/title
  - Key responsibility or achievement

  ### 7. EDUCATION & CERTIFICATIONS
  - Degrees (institution, field, year if available)
  - Professional certifications
  - Relevant courses or training

  ### 8. WEIGHTED SCORING (CRITICAL - Must provide actual numeric scores!)
  You MUST calculate and provide ALL these scores as integer values 0-100:

  - **skills_score** (0-100)
  - **experience_score** (0-100)
  - **education_score** (0-100)
  - **quality_score** (0-100)
  - **technical_score**: Set equal to skills_score
  - **overall_score**: Calculate as: round((skills_score × 0.4) + (experience_score × 0.3) + (education_score × 0.2) + (quality_score × 0.1))
  - **jd_match_score** (0-100 or null)

  ### 9. SUGGESTED INTERVIEW QUESTIONS
  Top 3-4 topics an interviewer should ask about. These are SUGGESTIONS for a future interview.

  ### 10. JD RECOMMENDATION (if no JD provided)
  Set "jd_recommendation" with:
  - "has_jd": true/false
  - "recommendation_message": If no JD, suggest: "Add a job description to get skills gap analysis, match percentage, and targeted interview questions."
  - "benefits_of_jd": ["Skills match analysis", "Gap identification", "Role-specific recommendations", "Targeted interview questions"]
  - **interview_topics**: List of suggested questions.

  ### 11. SCREENING VERDICT
  2-3 sentences: Who is this candidate? What roles are they best suited for? Should we move forward?

  ## OUTPUT FORMAT (JSON only, no markdown):
  {{
    "candidate_profile": {{
      "title": "<extract_title>",
      "career_stage": "<extract_level>",
      "domain": "<extract_domain>",
      "years_experience": "<extract_years>",
      "current_company": "<extract_company>",
      "current_role": "<extract_role>"
    }},
    "technical_skills": {{
      "languages": ["<lang_1>"],
      "frameworks": ["<fw_1>"],
      "databases": ["<db_1>"],
      "cloud_devops": ["<tool_1>"],
      "tools": ["<tool_1>"]
    }},
    "soft_skills": ["<skill_1>", "<skill_2>"],
    "domain_expertise": {{
      "industries": ["<ind_1>"],
      "certifications": ["<cert_1>"],
      "specializations": ["<spec_1>"]
    }},
    "career_highlights": ["<highlight_1>"],
    "experience_summary": [
      {{"company": "<name>", "duration": "<dates>", "role": "<title>", "highlight": "<achievement>"}}
    ],
    "education": [
      {{"degree": "<degree>", "institution": "<school>", "year": "<year>"}}
    ],
    "certifications": ["<cert_1>"],
    "skills_score": 0,
    "experience_score": 0,
    "education_score": 0,
    "quality_score": 0,
    "technical_score": 0,
    "overall_score": 0,
    "jd_match_score": null,
    "interview_topics": ["<topic_1>"],
    "jd_recommendation": {{
      "has_jd": false,
      "recommendation_message": "Add a job description to unlock skills gap analysis, match percentage, and role-specific interview questions.",
      "benefits_of_jd": ["Identify skill gaps for target role", "Calculate match percentage", "Get tailored interview questions", "Understand transferable skills"]
    }},
    "verdict": "<recruiter_verdict>"
  }}
